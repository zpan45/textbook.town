<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Page Title -->
  <title>Textbook Town - Make Your Sale</title>
  <!-- Import JS/CSS System Wide Libs -->
	<!-- Required Global Libs | Full List Maintained in: components/head.html, however HTML import does not exist right now so we need to copy paste, nick researched this for 2 hours with Mark. -->
		<!-- JS -->
		<script src="js/mustache.min.js"></script>
		<script src="js/core.js"></script>

		<!-- JS Lib -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

		<!-- CSS -->
		<link rel="stylesheet" type="text/css" href="css/core.css">

		<!-- FONT --><!-- TODO: reduce font weight use before production. -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Josefin+Sans:100,100i,300,300i,400,400i,600,600i,700,700i" rel="stylesheet">

</head>


<!-- Client Facing Content-->
<body>

	<!-- Menu and Top Section Container -->
	<div id="top"></div>

</body>


<script>

////
// Page Render
//
$(function() {
	//Chained rendering for nested items
	Promise.resolve(render("#top", "tp/head.html", {title: "Textbook Town - Make Your Sale"})).then(
    	render("#menu", "tp/menu.html", {auth_action: "#", auth_link: "Login"})
	);

  $.ajax({
    url: 'api/topBids.java',
    dataType: 'json'
    success: function(data)
    {renderTopBooks(data.bidList);}
  })

});
</script>


<script type="text/javascript">
$(function() {


  //Get Token
  token = getCookie("session");

  //If unset
  if (token == null){
      window.location.replace("login.html");
  }

  $.ajax({
    type: 'POST',
    url: 'http://127.0.0.1:5000/login/check',
    data: '{"token": "'+token+'"}',
    contentType:"application/json",
    dataType: 'json',
    success: function(res){
        if(res.status != 'success'){
          window.location.replace("login.html");
        }
    },
    failure: function(res){
      window.location.replace("login.html");
    }
  });
});
</script>




</html>
